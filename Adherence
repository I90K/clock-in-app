<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Attendance / Adherence Hours Calculator</title>
  <style>
    :root { color-scheme: light; }
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      margin: 0; padding: 24px;
      background: #f7f7f8; color: #111;
    }
    .card {
      max-width: 760px; margin: 0 auto;
      background: #fff; border: 1px solid #e6e6e9;
      border-radius: 14px; padding: 18px 18px 14px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.04);
    }
    h1 { font-size: 18px; margin: 0 0 10px; }
    h2 { font-size: 14px; margin: 16px 0 6px; }
    p { margin: 0 0 10px; color: #444; font-size: 14px; line-height: 1.4; }
    .important-note {
      background: #fafafa;
      border: 1px solid #e6e6e9;
      border-radius: 10px;
      padding: 10px 12px;
      font-size: 13px;
      color: #555;
      margin-bottom: 16px;
    }
    table { width: 100%; border-collapse: collapse; }
    th, td { padding: 10px 8px; border-top: 1px solid #eee; }
    th { text-align: left; font-size: 13px; color: #555; font-weight: 600; }
    td { vertical-align: middle; }
    input[type="number"] {
      width: 100%;
      padding: 10px 10px;
      border: 1px solid #d8d8de;
      border-radius: 10px;
      font-size: 14px;
      outline: none;
      background: #fff;
    }
    input[type="number"]:focus { 
      border-color: #8b8bf2; 
      box-shadow: 0 0 0 3px rgba(139,139,242,.15); 
    }
    .actions {
      display: flex; gap: 10px; align-items: center;
      margin-top: 12px;
    }
    button {
      border: 1px solid #d8d8de;
      background: #fff;
      padding: 10px 12px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 14px;
    }
    button:hover { background: #f4f4f6; }
    .danger { border-color: #f0c7c7; }
    .row-actions { display: flex; justify-content: flex-end; }
    .remove-btn { padding: 8px 10px; }
    .results {
      margin-top: 14px;
      padding: 12px;
      border-radius: 12px;
      background: #fafafa;
      border: 1px solid #eee;
    }
    .metric {
      display: flex; justify-content: space-between; gap: 12px;
      padding: 8px 0;
      border-top: 1px dashed #e6e6e6;
      font-size: 14px;
    }
    .metric:first-child { border-top: none; }
    .label { color: #555; }
    .value { font-weight: 700; }
    .note { margin-top: 8px; font-size: 12px; color: #666; }
  </style>
</head>
<body>
  <div class="card">
    <h1>Attendance / Adherence Hours Calculator</h1>

    <h2>How to Use This Tool</h2>
    <p>
      Enter the total number of shifts you are scheduled to work this month and 
      the length (in hours) of each shift.
    </p>
    <p>
      If you work different shift lengths (for example, some 8-hour shifts and some 10-hour shifts), 
      click <strong>"Add another shift length"</strong> to enter each group separately.
    </p>
    <p>
      The calculator will automatically total your scheduled hours and estimate 
      how many hours you could miss and still remain at 93% attendance adherence.
    </p>

    <div class="important-note">
      <strong>Important Note:</strong><br><br>
      The estimator tool is designed to provide a general guide based on the data entered by the user. 
      This calculator generates estimates of 7 percent of monthly schedules for demonstrations purposes only. 
      The calculations are not a promise of a specific attendance score. 
      Data from Verint, finesse and timetracker will drive final TimeChceck attendance score.
    </div>

    <table aria-label="Shift inputs">
      <thead>
        <tr>
          <th style="width: 45%;">Number of shifts</th>
          <th style="width: 45%;">Hours per shift</th>
          <th style="width: 10%;"></th>
        </tr>
      </thead>
      <tbody id="rows"></tbody>
    </table>

    <div class="actions">
      <button type="button" id="addRowBtn">Add another shift length</button>
    </div>

    <div class="results" aria-live="polite">
      <div class="metric">
        <div class="label">Total hours scheduled</div>
        <div class="value" id="totalHours">0</div>
      </div>
      <div class="metric">
        <div class="label">Hours you can miss and still be at <strong>93%</strong></div>
        <div class="value" id="allowedMiss">0</div>
      </div>
      <div class="metric">
        <div class="label">Minimum hours you must work to be at <strong>93%</strong></div>
        <div class="value" id="minWork">0</div>
      </div>
      <div class="note">
        This uses: <span style="font-weight:600;">Allowed miss hours = Total Ã— 0.07</span>
      </div>
    </div>
  </div>

  <script>
    const rowsEl = document.getElementById("rows");
    const addRowBtn = document.getElementById("addRowBtn");

    const totalHoursEl = document.getElementById("totalHours");
    const allowedMissEl = document.getElementById("allowedMiss");
    const minWorkEl = document.getElementById("minWork");

    function fmt(n) {
      const rounded = Math.round((n + Number.EPSILON) * 100) / 100;
      return (Number.isInteger(rounded) ? String(rounded) : rounded.toFixed(2));
    }

    function makeRow() {
      const tr = document.createElement("tr");

      const tdCount = document.createElement("td");
      const tdHours = document.createElement("td");
      const tdRemove = document.createElement("td");
      tdRemove.className = "row-actions";

      const countInput = document.createElement("input");
      countInput.type = "number";
      countInput.min = "0";
      countInput.step = "1";
      countInput.inputMode = "numeric";

      const hoursInput = document.createElement("input");
      hoursInput.type = "number";
      hoursInput.min = "0";
      hoursInput.step = "0.25";
      hoursInput.inputMode = "decimal";

      const removeBtn = document.createElement("button");
      removeBtn.type = "button";
      removeBtn.className = "remove-btn";
      removeBtn.textContent = "Remove";
      removeBtn.addEventListener("click", () => {
        tr.remove();
        update();
        syncRemoveButtons();
      });

      [countInput, hoursInput].forEach(inp => {
        inp.addEventListener("input", update);
      });

      tdCount.appendChild(countInput);
      tdHours.appendChild(hoursInput);
      tdRemove.appendChild(removeBtn);

      tr.appendChild(tdCount);
      tr.appendChild(tdHours);
      tr.appendChild(tdRemove);

      return tr;
    }

    function syncRemoveButtons() {
      const allRows = rowsEl.querySelectorAll("tr");
      allRows.forEach((row) => {
        const btn = row.querySelector("button.remove-btn");
        btn.style.visibility = (allRows.length === 1) ? "hidden" : "visible";
      });
    }

    function update() {
      let total = 0;

      rowsEl.querySelectorAll("tr").forEach(tr => {
        const inputs = tr.querySelectorAll("input");
        const shifts = Number(inputs[0].value);
        const hours = Number(inputs[1].value);

        if (Number.isFinite(shifts) && Number.isFinite(hours) && shifts > 0 && hours > 0) {
          total += shifts * hours;
        }
      });

      const allowedMiss = total * 0.07;
      const minWork = total * 0.93;

      totalHoursEl.textContent = fmt(total);
      allowedMissEl.textContent = fmt(allowedMiss);
      minWorkEl.textContent = fmt(minWork);
    }

    addRowBtn.addEventListener("click", () => {
      rowsEl.appendChild(makeRow());
      syncRemoveButtons();
    });

    rowsEl.appendChild(makeRow());
    syncRemoveButtons();
    update();
  </script>
</body>
</html>
